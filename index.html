<!DOCTYPE html>
<html lang="ja">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>出張！大学周辺ランチボックスフェア</title>

  <!-- Bootstrap, Font Awesome, jQuery UI -->
  <link rel="stylesheet"
        href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        crossorigin="anonymous">
  <link rel="stylesheet"
        href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/themes/base/jquery-ui.min.css">

  <style>
    /* 初期状態ではbodyを非表示 */
    body {
      display: none;
    }
  </style>
</head>
<body>
  <form method="post" class="mb-4">
    <!-- 名前 -->
    <div class="mb-3">
      <label class="form-label">名前</label>
      <input type="text" name="name" required class="form-control" placeholder="例: 山田 太郎">
    </div>
    <!-- ふりがな -->
    <div class="mb-3">
      <label class="form-label">おなまえ (ふりがな)</label>
      <input type="text" name="name_kana" required class="form-control" placeholder="例: やまだ たろう">
    </div>
    <!-- 電話番号 -->
    <div class="mb-3">
      <label class="form-label">電話番号(当日連絡させていただく可能性があります)</label>
      <input type="tel" name="phone" pattern="[0-9]+" required class="form-control" placeholder="例: 090-1234-5678">
    </div>
    <!-- 購入商品①（必須） -->
    <div class="mb-3">
      <label class="form-label">購入商品①（必須）</label>
      <select name="shop1" required class="form-select">
        <option value="">選択してください</option>
        <option value="食堂かわひがし">炭火焼き味噌豚&からあげ弁当(食堂かわひがし)</option>
        <option value="県大生協">豚塩カルビと唐揚げ丼(富山県立大学生協)</option>
        <option value="カフェしえる">角煮丼(カフェしえる)</option>
        <option value="とべーぐる">べーぐる&季節のケーキ(とべーぐる)</option>
        <option value="おむすびぐぐ屋（さけ、高菜）">おむすび[さけ&高菜]&唐揚げ(おむすびぐぐ屋)</option>
        <option value="おむすびぐぐ屋（黒とろろ、焼たらこ）">おむすび[くろとろろ&焼たらこ]&唐揚げ(おむすびぐぐ屋)</option>
        <option value="一条珈琲">クロワッサン&塩パン&アップルパイ(一条珈琲)</option>
      </select>
    </div>
    <!-- 以下、購入商品②〜④（任意）部分は省略せず同様に続く -->

    <button type="submit" class="btn btn-primary">注文を確定する</button>
  </form>

  <!-- スクリプト群 -->
  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
          crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
          crossorigin="anonymous"></script>
  <script charset="utf-8" 
          src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>

  <script>
    $(document).ready(function () {
      const liffId = "2007054863-m45ZelkY";  // ご自身のLIFF IDに置き換えてください
      initializeLiff(liffId);
    });

    function initializeLiff(liffId) {
      liff.init({ liffId: liffId })
        .then(() => {
          initializeApp();
        })
        .catch((err) => {
          console.log('LIFF Initialization failed ', err);
        });
    }

    function initializeApp() {
      if (liff.isLoggedIn()) {
        liff.getProfile()
          .then(profile => {
            // LINE ID 取得完了 → 画面を表示
            document.body.style.display = "block";
          })
          .catch((err) => {
            console.log('プロフィール取得エラー', err);
          });
      } else {
        // ログインしていなければログインさせる
        liff.login();
      }
    }
  </script>
</body>
</html>
